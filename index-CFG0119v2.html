<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta
      name="description"
      content="DCCSèªçŸ¥å½ˆæ€§è¨“ç·´æ¨¡çµ„æ˜¯ä¸­åŸå¤§å­¸ç‰¹æ®Šæ•™è‚²å­¸ç³»çš„å­¸è¡“ç ”ç©¶å·¥å…·ï¼Œå°ˆç‚ºè½éšœå­¸ç”Ÿè¨­è¨ˆã€‚æ¡ç”¨çœ¼ç›èˆ‡å˜´å·´ä½œç‚ºåˆºæ¿€ç‰©ï¼Œç¬¦åˆè½éšœå­¸ç”Ÿè¦–è¦ºå­¸ç¿’ç‰¹æ€§ã€‚ä¸æ”¶é›†ä»»ä½•å€‹äººè³‡è¨Šï¼Œæ‰€æœ‰è³‡æ–™åƒ…åœ¨ç€è¦½å™¨æœ¬åœ°è™•ç†ã€‚"
    />
    <meta name="author" content="ä¸­åŸå¤§å­¸ç‰¹æ®Šæ•™è‚²å­¸ç³»ç¢©å£«ç­" />
    <meta
      name="keywords"
      content="DCCS, èªçŸ¥å½ˆæ€§, åŸ·è¡ŒåŠŸèƒ½, è½éšœå­¸ç”Ÿ, ç‰¹æ®Šæ•™è‚², å­¸è¡“ç ”ç©¶, èªçŸ¥è¨“ç·´"
    />
    <meta name="classification" content="Education, Academic Research" />
    <meta name="category" content="Education" />
    <meta name="robots" content="index, follow" />

    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'none'; frame-ancestors 'none'; form-action 'self'; base-uri 'self';"
    />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-XSS-Protection" content="1; mode=block" />

    <meta property="og:title" content="DCCSèªçŸ¥å½ˆæ€§è¨“ç·´æ¨¡çµ„ - è½éšœå­¸ç”Ÿå°ˆç”¨" />
    <meta
      property="og:description"
      content="ä¸­åŸå¤§å­¸ç‰¹æ®Šæ•™è‚²å­¸ç³»å­¸è¡“ç ”ç©¶å·¥å…·ï¼Œå°ˆç‚ºè½éšœå­¸ç”Ÿè¨­è¨ˆçš„èªçŸ¥å½ˆæ€§è¨“ç·´ç³»çµ±"
    />
    <meta property="og:type" content="website" />

    <title>
      DCCSèªçŸ¥å½ˆæ€§è¨“ç·´æ¨¡çµ„ - è½éšœå­¸ç”Ÿå°ˆç”¨ | ä¸­åŸå¤§å­¸ç‰¹æ•™ç³»å­¸è¡“ç ”ç©¶å·¥å…·
    </title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Microsoft JhengHei", Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
      }

      #gameContainer {
        width: 90vw;
        max-width: 900px;
        height: 85vh;
        max-height: 900px;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        display: flex;
        flex-direction: column;
        position: relative;
        overflow-y: auto;
      }

      #header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 15px;
        text-align: center;
        font-size: 20px;
        font-weight: bold;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        flex-shrink: 0;
      }

      #mainArea {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        padding: 30px 40px;
        position: relative;
        overflow-y: auto;
      }

      .screen {
        display: none;
        width: 100%;
        height: 100%;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        text-align: center;
        padding-bottom: 20px;
      }

      .screen.active {
        display: flex;
      }

      #landingScreen h2 {
        font-size: 28px;
        color: #667eea;
        margin-bottom: 20px;
      }

      #landingScreen p {
        font-size: 16px;
        color: #666;
        margin-bottom: 15px;
        line-height: 1.6;
      }

      .input-group {
        margin: 20px 0;
      }

      .input-group label {
        display: block;
        font-size: 16px;
        color: #333;
        margin-bottom: 10px;
      }

      .input-group input {
        padding: 12px 20px;
        font-size: 16px;
        border: 2px solid #667eea;
        border-radius: 10px;
        width: 300px;
        text-align: center;
      }

      .btn {
        padding: 12px 35px;
        font-size: 16px;
        font-weight: bold;
        color: white;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        border-radius: 50px;
        cursor: pointer;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
        margin: 10px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
      }

      .btn:active {
        transform: translateY(0);
      }

      .btn-secondary {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }

      .instruction-box {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 15px;
        max-width: 800px;
        margin: 15px auto;
        text-align: left;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .instruction-box h3 {
        color: #667eea;
        font-size: 22px;
        margin-bottom: 15px;
        text-align: center;
      }

      .instruction-box ul {
        list-style: none;
        padding: 0;
      }

      .instruction-box li {
        padding: 12px;
        margin: 8px 0;
        background: white;
        border-left: 4px solid #667eea;
        border-radius: 5px;
        font-size: 15px;
      }

      .instruction-box .highlight {
        color: #f5576c;
        font-weight: bold;
      }

      #visualCue {
        position: absolute;
        top: 20px;
        width: 100%;
        display: none;
        justify-content: center;
        align-items: center;
        gap: 20px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 10px;
        z-index: 10;
      }

      .cue-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 20px;
        border-radius: 10px;
        font-size: 16px;
        font-weight: bold;
      }

      .cue-icon {
        width: 40px;
        height: 40px;
      }

      .cue-active {
        background: #ffd700;
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(255, 215, 0, 0.5);
      }

      /* ã€ä¿®æ­£å•é¡Œ2ã€‘å¡ç‰‡é–ƒç™½å•é¡Œ - ä½¿ç”¨ overflow: hidden å’Œå®Œæ•´å¡«æ»¿ */
      #cardDisplay {
        width: 300px;
        height: 375px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
        transition: transform 0.3s;
        overflow: hidden; /* ã€é—œéµä¿®æ­£ã€‘éš±è—æº¢å‡ºéƒ¨åˆ†ï¼Œé˜²æ­¢ç™½è‰²ç©ºéš™ */
      }

      #cardDisplay.correct {
        box-shadow: 0 0 0 5px #4caf50;
        animation: correctPulse 0.5s;
      }

      #cardDisplay.incorrect {
        box-shadow: 0 0 0 5px #f44336;
        animation: incorrectShake 0.5s;
      }

      @keyframes correctPulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes incorrectShake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-10px);
        }
        75% {
          transform: translateX(10px);
        }
      }

      /* ã€ä¿®æ­£å•é¡Œ2ã€‘èƒŒæ™¯å±¤å®Œå…¨å¡«æ»¿ */
      #cardBackground {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: 1;
      }

      /* ã€ä¿®æ­£å•é¡Œ2ã€‘èƒŒæ™¯SVGå®Œå…¨å¡«æ»¿ */
      #cardBackground svg {
        width: 100%;
        height: 100%;
        display: block; /* ç§»é™¤inlineå…ƒç´ åº•éƒ¨ç©ºç™½ */
      }

      #cardForeground {
        position: relative;
        z-index: 2;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      #cardForeground svg {
        width: 150px;
        height: 150px;
      }

      #sortingBoxes {
        display: flex;
        gap: 50px;
        margin-top: 30px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .sorting-box {
        width: 120px;
        height: 120px;
        border: 4px solid #333;
        border-radius: 15px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
        background: white;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
      }

      .sorting-box:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
      }

      .sorting-box:active {
        transform: scale(0.95);
      }

      .sorting-box svg {
        width: 60px;
        height: 60px;
        margin-bottom: 10px;
      }

      .sorting-box .label {
        font-size: 14px;
        font-weight: bold;
        color: #333;
      }

      .sorting-box.left.active {
        border-color: #2196f3;
        box-shadow: 0 0 20px rgba(33, 150, 243, 0.5);
      }

      .sorting-box.right.active {
        border-color: #f44336;
        box-shadow: 0 0 20px rgba(244, 67, 54, 0.5);
      }

      #feedbackMessage {
        position: absolute;
        bottom: 50px;
        font-size: 32px;
        font-weight: bold;
        opacity: 0;
        transition: opacity 0.3s;
      }

      #feedbackMessage.show {
        opacity: 1;
      }

      #feedbackMessage.correct {
        color: #4caf50;
      }

      #feedbackMessage.incorrect {
        color: #f44336;
      }

      #progressBar {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 10px;
        background: #e0e0e0;
      }

      #progressFill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        width: 0%;
        transition: width 0.5s;
      }

      .stats-container {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 15px;
        max-width: 600px;
        margin: 20px auto;
      }

      .stats-row {
        display: flex;
        justify-content: space-between;
        padding: 15px;
        margin: 10px 0;
        background: white;
        border-radius: 10px;
        font-size: 18px;
      }

      .stats-label {
        font-weight: bold;
        color: #667eea;
      }

      .stats-value {
        color: #333;
      }

      /* å¹³æ¿å’Œæ‰‹æ©Ÿç›´å‘ */
      @media (max-width: 768px) {
        #gameContainer {
          width: 100vw;
          height: 100vh;
          border-radius: 0;
          max-height: none;
        }

        #header {
          font-size: 18px;
          padding: 12px;
        }

        #mainArea {
          padding: 20px 15px;
        }

        #landingScreen h2 {
          font-size: 24px;
        }

        #landingScreen p {
          font-size: 14px;
        }

        .input-group input {
          width: 250px;
        }

        .instruction-box {
          padding: 20px;
          margin: 10px;
        }

        .instruction-box h3 {
          font-size: 20px;
        }

        .instruction-box li {
          font-size: 14px;
          padding: 10px;
        }

        #cardDisplay {
          width: 250px;
          height: 312px;
        }

        #cardForeground svg {
          width: 120px;
          height: 120px;
        }

        #sortingBoxes {
          gap: 30px;
          margin-top: 20px;
        }

        .sorting-box {
          width: 100px;
          height: 100px;
        }

        .sorting-box svg {
          width: 50px;
          height: 50px;
        }

        .sorting-box .label {
          font-size: 12px;
        }

        #visualCue {
          top: 10px;
          gap: 10px;
          padding: 10px;
        }

        .cue-item {
          padding: 8px 15px;
          font-size: 14px;
        }

        .cue-icon {
          width: 30px;
          height: 30px;
        }

        #feedbackMessage {
          font-size: 24px;
          bottom: 30px;
        }

        .stats-container {
          padding: 20px;
          margin: 10px;
        }

        .stats-row {
          font-size: 16px;
          padding: 12px;
        }
      }

      /* ã€ä¿®æ­£å•é¡Œ3ã€‘æ‰‹æ©Ÿæ©«å‘å°ˆç”¨è¨­è¨ˆ */
      @media (max-height: 500px) and (orientation: landscape) {
        #gameContainer {
          height: 100vh;
          overflow-y: auto;
        }

        #header {
          font-size: 16px;
          padding: 8px;
        }

        /* ã€ä¿®æ­£å•é¡Œ2ã€‘æ‰‹æ©Ÿæ©«å‘ï¼šå·¦Fï¼Œä¸­å¡ç‰‡ï¼Œå³J æ°´å¹³æ’åˆ— */
        #mainArea {
          padding: 10px;
          flex-direction: row; /* æ©«å‘æ’åˆ— */
          justify-content: center;
          align-items: center;
          gap: 20px; /* å…ƒç´ é–“è· */
        }

        #cardDisplay {
          width: 220px;
          height: 275px;
          margin: 0; /* ç§»é™¤ margin */
          order: 2; /* å¡ç‰‡åœ¨ä¸­é–“ */
        }

        #cardForeground svg {
          width: 110px;
          height: 110px;
        }

        /* åˆ†é¡ç›’å­å®¹å™¨ï¼šæ”¹ç‚ºæ°´å¹³æ’åˆ—ï¼Œåˆ†åˆ¥åœ¨å·¦å³ */
        #sortingBoxes {
          display: contents; /* è®“å­å…ƒç´ ç›´æ¥åƒèˆ‡çˆ¶å±¤ flex ä½ˆå±€ */
        }

        /* å·¦é‚Šç›’å­ (F éµ) */
        .sorting-box.left {
          order: 1; /* åœ¨æœ€å·¦é‚Š */
          width: 100px;
          height: 100px;
          flex-direction: column; /* åœ–ç¤ºå’Œæ–‡å­—å‚ç›´ */
        }

        /* å³é‚Šç›’å­ (J éµ) */
        .sorting-box.right {
          order: 3; /* åœ¨æœ€å³é‚Š */
          width: 100px;
          height: 100px;
          flex-direction: column; /* åœ–ç¤ºå’Œæ–‡å­—å‚ç›´ */
        }

        .sorting-box svg {
          width: 45px;
          height: 45px;
          margin-bottom: 8px;
          margin-right: 0;
        }

        .sorting-box .label {
          font-size: 13px;
        }

        #visualCue {
          top: 5px;
          gap: 15px;
          padding: 5px 10px;
        }

        .cue-item {
          padding: 5px 10px;
          font-size: 12px;
        }

        .cue-icon {
          width: 25px;
          height: 25px;
        }

        #feedbackMessage {
          font-size: 20px;
          bottom: 20px;
        }

        .instruction-box {
          max-height: 60vh;
          overflow-y: auto;
        }
      }

      /* ç‰¹å°è¢å¹• */
      @media (max-width: 480px) {
        #cardDisplay {
          width: 200px;
          height: 250px;
        }

        #cardForeground svg {
          width: 100px;
          height: 100px;
        }

        .sorting-box {
          width: 90px;
          height: 90px;
        }

        .sorting-box svg {
          width: 40px;
          height: 40px;
        }
      }
    </style>
  </head>
  <body>
    <div id="gameContainer">
      <div id="header">DCCSèªçŸ¥å½ˆæ€§è¨“ç·´éŠæˆ²</div>

      <div id="mainArea">
        <div id="landingScreen" class="screen active">
          <div
            style="
              background: #e3f2fd;
              padding: 15px;
              border-radius: 15px;
              margin-bottom: 20px;
              max-width: 600px;
              text-align: left;
            "
          >
            <h3 style="color: #1565c0; margin-bottom: 12px; font-size: 18px">
              ğŸ“š å­¸è¡“ç ”ç©¶å·¥å…·
            </h3>
            <p style="margin: 8px 0; line-height: 1.6; font-size: 14px">
              æœ¬ç³»çµ±ç‚º<strong>ä¸­åŸå¤§å­¸ç‰¹æ®Šæ•™è‚²å­¸ç³»</strong>ç¢©å£«ç­ç ”ç©¶å°ˆæ¡ˆï¼Œ
              å°ˆç‚º<strong>è½éšœå­¸ç”Ÿï¼ˆ7-12æ­²ï¼‰</strong>è¨­è¨ˆçš„èªçŸ¥å½ˆæ€§è¨“ç·´å·¥å…·ã€‚
            </p>
            <p style="margin: 8px 0; line-height: 1.6; font-size: 14px">
              <strong style="color: #2e7d32">âœ… ä¸æ”¶é›†ä»»ä½•å€‹äººè³‡è¨Š</strong
              ><br />
              <strong style="color: #2e7d32">âœ… æ‰€æœ‰è³‡æ–™åƒ…å­˜æ–¼æ‚¨çš„ç€è¦½å™¨</strong
              ><br />
              <strong style="color: #2e7d32"
                >âœ… é–‹æºé€æ˜ï¼Œå¯æ–¼ GitHub æŸ¥é–±</strong
              >
            </p>
          </div>

          <h2>ğŸ§  æ­¡è¿ä¾†åˆ°èªçŸ¥å½ˆæ€§è¨“ç·´éŠæˆ²</h2>
          <p>é€™å€‹éŠæˆ²æœƒå¹«åŠ©ä½ ç·´ç¿’ã€Œè¦å‰‡è½‰æ›ã€çš„èƒ½åŠ›</p>
          <p>
            è«‹æº–å‚™å¥½éµç›¤ï¼Œä½¿ç”¨<strong>Féµï¼ˆå·¦æ‰‹é£ŸæŒ‡ï¼‰</strong> å’Œ
            <strong>Jéµï¼ˆå³æ‰‹é£ŸæŒ‡ï¼‰</strong>
          </p>
          <p style="color: #667eea; font-size: 14px; margin-top: 10px">
            ğŸ’¡ æç¤ºï¼šæŒ‰<strong>ç©ºç™½éµ</strong>ä¹Ÿå¯ä»¥é–‹å§‹
          </p>

          <div class="input-group">
            <label for="participantId">è«‹è¼¸å…¥ä½ çš„ç·¨è™Ÿï¼ˆé¸å¡«ï¼‰ï¼š</label>
            <input type="text" id="participantId" placeholder="ä¾‹å¦‚ï¼šS001" />
          </div>

          <button class="btn" onclick="game.startGame()">é–‹å§‹éŠæˆ²</button>

          <div style="margin-top: 20px; font-size: 13px; color: #666">
            <p>
              ğŸ’¾ è³‡æ–™ä¸‹è¼‰èªªæ˜ï¼šéŠæˆ²çµæŸå¾Œå¯ä¸‹è¼‰ CSV
              ç´”æ–‡å­—æª”æ¡ˆä¾›ç ”ç©¶åˆ†æï¼Œä¸å«å€‹äººè­˜åˆ¥è³‡è¨Š
            </p>
          </div>
        </div>

        <div id="phase1Instruction" class="screen">
          <div class="instruction-box">
            <h3>ğŸ“˜ éšæ®µä¸€ï¼šå­¸ç¿’è¦å‰‡ï¼ˆèƒŒæ™¯é¡è‰²åˆ†é¡ï¼‰</h3>
            <ul>
              <li>
                ä½ æœƒçœ‹åˆ°ä¸€å¼µå¡ç‰‡ï¼Œå¡ç‰‡æœ‰<span class="highlight">èƒŒæ™¯é¡è‰²</span
                >ï¼ˆè—è‰²æˆ–ç´…è‰²ï¼‰
              </li>
              <li>
                å¡ç‰‡å‰é¢é‚„æœ‰ä¸€å€‹<span class="highlight">é»‘è‰²åœ–æ¡ˆ</span>ï¼ˆçœ¼ç›ğŸ‘ï¸
                æˆ– å˜´å·´ğŸ˜Šï¼‰
              </li>
              <li>
                <strong>è«‹æ³¨æ„ã€ŒèƒŒæ™¯é¡è‰²ã€</strong>ï¼š <br />â€¢ è—è‰²èƒŒæ™¯ â†’
                æŒ‰<strong>Féµ</strong>ï¼ˆå·¦æ‰‹é£ŸæŒ‡ï¼‰ <br />â€¢ ç´…è‰²èƒŒæ™¯ â†’
                æŒ‰<strong>Jéµ</strong>ï¼ˆå³æ‰‹é£ŸæŒ‡ï¼‰
              </li>
              <li>
                âš ï¸ é€™å€‹éšæ®µè«‹<strong>å¿½ç•¥</strong>å‰é¢çš„é»‘è‰²åœ–æ¡ˆï¼ˆçœ¼ç›æˆ–å˜´å·´ï¼‰
              </li>
              <li>ç¸½å…±10é¡Œï¼ŒåŠ æ²¹ï¼</li>
            </ul>
            <p
              style="
                color: #667eea;
                font-size: 14px;
                text-align: center;
                margin-top: 15px;
              "
            >
              ğŸ’¡ æç¤ºï¼šæŒ‰<strong>ç©ºç™½éµ</strong>ä¹Ÿå¯ä»¥ç¹¼çºŒ
            </p>
          </div>
          <button class="btn" onclick="game.startPhase1()">æˆ‘æº–å‚™å¥½äº†ï¼</button>
        </div>

        <div id="phase2Instruction" class="screen">
          <div class="instruction-box">
            <h3>ğŸ“— éšæ®µäºŒï¼šè½‰æ›è¦å‰‡ï¼ˆè‡‰éƒ¨ç‰¹å¾µåˆ†é¡ï¼‰</h3>
            <ul>
              <li><span class="highlight">è¦å‰‡æ”¹è®Šäº†ï¼</span></li>
              <li>
                ç¾åœ¨è«‹<strong>æ³¨æ„ã€Œå‰é¢çš„é»‘è‰²åœ–æ¡ˆã€</strong>ï¼š <br />â€¢ çœ¼ç›ğŸ‘ï¸ â†’
                æŒ‰<strong>Féµ</strong>ï¼ˆå·¦æ‰‹é£ŸæŒ‡ï¼‰ <br />â€¢ å˜´å·´ğŸ˜Š â†’
                æŒ‰<strong>Jéµ</strong>ï¼ˆå³æ‰‹é£ŸæŒ‡ï¼‰
              </li>
              <li>âš ï¸ é€™å€‹éšæ®µè«‹<strong>å¿½ç•¥</strong>èƒŒæ™¯é¡è‰²</li>
              <li>è©¦è‘—å¿˜è¨˜ä¸Šä¸€å€‹éšæ®µçš„è¦å‰‡ï¼Œå°ˆæ³¨åœ¨æ–°è¦å‰‡ä¸Šï¼</li>
              <li>ç¸½å…±10é¡Œï¼Œä½ å¯ä»¥çš„ï¼</li>
            </ul>
            <p
              style="
                color: #667eea;
                font-size: 14px;
                text-align: center;
                margin-top: 15px;
              "
            >
              ğŸ’¡ æç¤ºï¼šæŒ‰<strong>ç©ºç™½éµ</strong>ä¹Ÿå¯ä»¥ç¹¼çºŒ
            </p>
          </div>
          <button class="btn" onclick="game.startPhase2()">æˆ‘æº–å‚™å¥½äº†ï¼</button>
        </div>

        <div id="phase3Instruction" class="screen">
          <div class="instruction-box">
            <h3>ğŸ“• éšæ®µä¸‰ï¼šæ··åˆè½‰æ›ï¼ˆéš¨æ©Ÿåˆ‡æ›è¦å‰‡ï¼‰</h3>
            <ul>
              <li><span class="highlight">æœ€å¤§æŒ‘æˆ°ä¾†äº†ï¼</span></li>
              <li>æ¯ä¸€é¡Œéƒ½æœƒ<strong>éš¨æ©Ÿ</strong>å‘Šè¨´ä½ è¦ç”¨å“ªå€‹è¦å‰‡</li>
              <li>
                çœ‹åˆ°<strong style="color: blue">è—è‰²æ¨™ç¤º ğŸ¨</strong> â†’
                æŒ‰ã€ŒèƒŒæ™¯é¡è‰²ã€åˆ†é¡
              </li>
              <li>
                çœ‹åˆ°<strong style="color: orange">æ©˜è‰²æ¨™ç¤º ğŸ–¼ï¸</strong> â†’
                æŒ‰ã€Œå‰æ™¯åœ–æ¡ˆã€åˆ†é¡
              </li>
              <li>è¦éš¨æ™‚ä¿æŒæ³¨æ„åŠ›ï¼Œå¿«é€Ÿåˆ‡æ›è¦å‰‡ï¼</li>
              <li>ç¸½å…±16é¡Œï¼Œé€™æ˜¯æœ€å¾Œè¡åˆºï¼</li>
            </ul>
            <p
              style="
                color: #667eea;
                font-size: 14px;
                text-align: center;
                margin-top: 15px;
              "
            >
              ğŸ’¡ æç¤ºï¼šæŒ‰<strong>ç©ºç™½éµ</strong>ä¹Ÿå¯ä»¥ç¹¼çºŒ
            </p>
          </div>
          <button class="btn" onclick="game.startPhase3()">æŒ‘æˆ°é–‹å§‹ï¼</button>
        </div>

        <div id="gameScreen" class="screen">
          <div id="visualCue">
            <div id="colorCue" class="cue-item">
              <svg class="cue-icon" viewBox="0 0 100 100">
                <rect width="100" height="100" rx="10" fill="#4a90e2" />
              </svg>
              <span>èƒŒæ™¯é¡è‰²</span>
            </div>
            <div id="shapeCue" class="cue-item">
              <svg class="cue-icon" viewBox="0 0 100 100">
                <rect
                  width="100"
                  height="100"
                  rx="10"
                  fill="white"
                  stroke="#333"
                  stroke-width="4"
                />
                <ellipse cx="35" cy="45" rx="8" ry="10" fill="#333" />
                <ellipse cx="65" cy="45" rx="8" ry="10" fill="#333" />
                <path
                  d="M 30 65 Q 50 80 70 65"
                  stroke="#333"
                  stroke-width="4"
                  fill="none"
                  stroke-linecap="round"
                />
              </svg>
              <span>è‡‰éƒ¨ç‰¹å¾µ</span>
            </div>
          </div>

          <div id="cardDisplay">
            <div id="cardBackground"></div>
            <div id="cardForeground"></div>
          </div>

          <div id="sortingBoxes">
            <div class="sorting-box left" id="leftBox">
              <div id="leftBoxIcon"></div>
              <div class="label">æŒ‰ F éµ</div>
            </div>
            <div class="sorting-box right" id="rightBox">
              <div id="rightBoxIcon"></div>
              <div class="label">æŒ‰ J éµ</div>
            </div>
          </div>

          <div id="feedbackMessage"></div>
          <div id="progressBar">
            <div id="progressFill"></div>
          </div>
        </div>

        <div id="resultsScreen" class="screen">
          <h2>ğŸ‰ æ­å–œå®Œæˆè¨“ç·´ï¼</h2>
          <div class="stats-container" id="statsContainer"></div>
          <div>
            <button class="btn" onclick="game.exportData()">ğŸ’¾ ä¸‹è¼‰æ•¸æ“š</button>
            <button class="btn btn-secondary" onclick="game.restart()">
              ğŸ”„ é‡æ–°é–‹å§‹
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      const game = {
        participantId: "",
        currentPhase: 0,
        currentTrial: 0,
        totalTrials: 0,
        currentCard: null,
        currentRule: "",
        startTime: 0,
        results: [],

        cardConfig: {
          backgrounds: ["blue", "red"],
          foregrounds: ["eyes", "mouth"],
        },

        phaseConfig: {
          1: { trials: 10, rule: "color" },
          2: { trials: 10, rule: "shape" },
          3: { trials: 16, rule: "mixed" },
        },

        svgAssets: {
          backgrounds: {
            blue: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 375" width="300" height="375" preserveAspectRatio="none">
                            <rect width="300" height="375" rx="20" fill="#4A90E2"/>
                          </svg>`,
            red: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 375" width="300" height="375" preserveAspectRatio="none">
                           <rect width="300" height="375" rx="20" fill="#E74C3C"/>
                         </svg>`,
          },
          foregrounds: {
            eyes: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150" width="150" height="150">
                            <ellipse cx="45" cy="75" rx="19" ry="26" fill="#000000"/>
                            <ellipse cx="105" cy="75" rx="19" ry="26" fill="#000000"/>
                          </svg>`,
            mouth: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150" width="150" height="150">
                             <path d="M 38 75 Q 75 105 112 75" 
                                   stroke="#000000" 
                                   stroke-width="11" 
                                   fill="none" 
                                   stroke-linecap="round"/>
                           </svg>`,
          },
          boxes: {
            blueBox: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="60" height="60">
                               <rect width="60" height="60" rx="10" fill="#4A90E2"/>
                             </svg>`,
            redBox: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="60" height="60">
                              <rect width="60" height="60" rx="10" fill="#E74C3C"/>
                            </svg>`,
            eyesBox: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="60" height="60">
                               <ellipse cx="19" cy="30" rx="8" ry="11" fill="#000000"/>
                               <ellipse cx="41" cy="30" rx="8" ry="11" fill="#000000"/>
                             </svg>`,
            mouthBox: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="60" height="60">
                                <path d="M 15 30 Q 30 45 45 30" 
                                      stroke="#000000" 
                                      stroke-width="6" 
                                      fill="none" 
                                      stroke-linecap="round"/>
                              </svg>`,
          },
        },

        init() {
          console.log("ğŸ® éŠæˆ²ç³»çµ±åˆå§‹åŒ–...");
          document.addEventListener("keydown", (e) => this.handleKeyPress(e));

          document.getElementById("leftBox").addEventListener("click", () => {
            const gameScreen = document.getElementById("gameScreen");
            if (gameScreen.classList.contains("active")) {
              this.checkAnswer("KeyF");
            }
          });

          document.getElementById("rightBox").addEventListener("click", () => {
            const gameScreen = document.getElementById("gameScreen");
            if (gameScreen.classList.contains("active")) {
              this.checkAnswer("KeyJ");
            }
          });

          console.log("âœ… éŠæˆ²ç³»çµ±åˆå§‹åŒ–å®Œæˆï¼ˆå«è§¸æ§æ”¯æ´ï¼‰");
        },

        startGame() {
          const inputId = document.getElementById("participantId").value.trim();
          this.participantId = inputId || "NoName";
          console.log(`ğŸš€ éŠæˆ²é–‹å§‹ - å—è©¦è€…: ${this.participantId}`);
          this.showScreen("phase1Instruction");
        },

        startPhase1() {
          this.currentPhase = 1;
          this.currentTrial = 0;
          this.totalTrials = this.phaseConfig[1].trials;
          this.currentRule = "color";
          console.log("ğŸ“˜ éšæ®µä¸€é–‹å§‹ - æŒ‰èƒŒæ™¯é¡è‰²åˆ†é¡");
          this.updateSortingBoxes("color");
          document.getElementById("visualCue").style.display = "none";
          this.nextTrial();
        },

        startPhase2() {
          this.currentPhase = 2;
          this.currentTrial = 0;
          this.totalTrials = this.phaseConfig[2].trials;
          this.currentRule = "shape";
          console.log("ğŸ“— éšæ®µäºŒé–‹å§‹ - æŒ‰å‰æ™¯åœ–æ¡ˆåˆ†é¡");
          this.updateSortingBoxes("shape");
          document.getElementById("visualCue").style.display = "none";
          this.nextTrial();
        },

        startPhase3() {
          this.currentPhase = 3;
          this.currentTrial = 0;
          this.totalTrials = this.phaseConfig[3].trials;
          console.log("ğŸ“• éšæ®µä¸‰é–‹å§‹ - æ··åˆéš¨æ©Ÿè¦å‰‡");
          const visualCue = document.getElementById("visualCue");
          visualCue.style.display = "flex";
          console.log("âœ… è¦–è¦ºæç¤ºå·²å•Ÿç”¨");
          this.nextTrial();
        },

        nextTrial() {
          if (this.currentTrial >= this.totalTrials) {
            this.finishPhase();
            return;
          }

          this.currentTrial++;
          this.currentCard = this.generateRandomCard();

          if (this.currentPhase === 3) {
            this.currentRule = Math.random() < 0.5 ? "color" : "shape";
            this.updateVisualCue(this.currentRule);
            this.updateSortingBoxes(this.currentRule);
          }

          this.displayCard(this.currentCard);
          this.startTime = Date.now();
          this.updateProgressBar();
          console.log(
            `ğŸ“ éšæ®µ${this.currentPhase} ç¬¬${this.currentTrial}é¡Œ - è¦å‰‡: ${this.currentRule}`,
          );
        },

        generateRandomCard() {
          const backgrounds = this.cardConfig.backgrounds;
          const foregrounds = this.cardConfig.foregrounds;
          return {
            background:
              backgrounds[Math.floor(Math.random() * backgrounds.length)],
            foreground:
              foregrounds[Math.floor(Math.random() * foregrounds.length)],
          };
        },

        displayCard(card) {
          document.getElementById("cardBackground").innerHTML =
            this.svgAssets.backgrounds[card.background];
          document.getElementById("cardForeground").innerHTML =
            this.svgAssets.foregrounds[card.foreground];
          this.showScreen("gameScreen");
        },

        updateVisualCue(rule) {
          const colorCue = document.getElementById("colorCue");
          const shapeCue = document.getElementById("shapeCue");
          colorCue.classList.remove("cue-active");
          shapeCue.classList.remove("cue-active");
          if (rule === "color") {
            colorCue.classList.add("cue-active");
            console.log("ğŸ¨ è¦–è¦ºæç¤ºï¼šèƒŒæ™¯é¡è‰²");
          } else {
            shapeCue.classList.add("cue-active");
            console.log("ğŸ–¼ï¸ è¦–è¦ºæç¤ºï¼šè‡‰éƒ¨ç‰¹å¾µ");
          }
        },

        updateSortingBoxes(rule) {
          const leftBoxIcon = document.getElementById("leftBoxIcon");
          const rightBoxIcon = document.getElementById("rightBoxIcon");
          if (rule === "color") {
            leftBoxIcon.innerHTML = this.svgAssets.boxes.blueBox;
            rightBoxIcon.innerHTML = this.svgAssets.boxes.redBox;
          } else {
            leftBoxIcon.innerHTML = this.svgAssets.boxes.eyesBox;
            rightBoxIcon.innerHTML = this.svgAssets.boxes.mouthBox;
          }
        },

        updateProgressBar() {
          const progress = (this.currentTrial / this.totalTrials) * 100;
          document.getElementById("progressFill").style.width = `${progress}%`;
        },

        handleKeyPress(e) {
          // ã€ä¿®æ­£å•é¡Œ1ã€‘åœ¨é¦–é å’Œéšæ®µèªªæ˜é éƒ½å¯ä»¥ç”¨ç©ºç™½éµ
          const landingScreen = document.getElementById("landingScreen");
          const phase1Instruction =
            document.getElementById("phase1Instruction");
          const phase2Instruction =
            document.getElementById("phase2Instruction");
          const phase3Instruction =
            document.getElementById("phase3Instruction");

          if (e.key === " " || e.key === "Spacebar") {
            e.preventDefault();

            if (landingScreen.classList.contains("active")) {
              this.startGame();
              return;
            }
            if (phase1Instruction.classList.contains("active")) {
              this.startPhase1();
              return;
            }
            if (phase2Instruction.classList.contains("active")) {
              this.startPhase2();
              return;
            }
            if (phase3Instruction.classList.contains("active")) {
              this.startPhase3();
              return;
            }
          }

          // åœ¨éŠæˆ²é€²è¡Œä¸­è™•ç† F/J éµ
          const gameScreen = document.getElementById("gameScreen");
          if (!gameScreen.classList.contains("active")) return;

          if (e.key === "f" || e.key === "F") {
            e.preventDefault();
            this.checkAnswer("KeyF");
          } else if (e.key === "j" || e.key === "J") {
            e.preventDefault();
            this.checkAnswer("KeyJ");
          }
        },

        checkAnswer(keyPressed) {
          const reactionTime = Date.now() - this.startTime;
          let correctKey;
          if (this.currentRule === "color") {
            correctKey =
              this.currentCard.background === "blue" ? "KeyF" : "KeyJ";
          } else {
            correctKey =
              this.currentCard.foreground === "eyes" ? "KeyF" : "KeyJ";
          }

          const isCorrect = keyPressed === correctKey;

          this.recordResult({
            participantId: this.participantId,
            phase: this.currentPhase,
            trial: this.currentTrial,
            rule: this.currentRule,
            cardBackground: this.currentCard.background,
            cardForeground: this.currentCard.foreground,
            keyPressed: keyPressed,
            correctKey: correctKey,
            isCorrect: isCorrect,
            reactionTime: reactionTime,
            timestamp: new Date().toISOString(),
          });

          this.showFeedback(isCorrect);
          setTimeout(() => this.nextTrial(), 1000);
        },

        recordResult(data) {
          this.results.push(data);
          console.log(
            `ğŸ“Š è¨˜éŒ„çµæœ - éšæ®µ${data.phase} ç¬¬${data.trial}é¡Œ: ${data.isCorrect ? "âœ…æ­£ç¢º" : "âŒéŒ¯èª¤"} (${data.reactionTime}ms)`,
          );
        },

        showFeedback(isCorrect) {
          const cardDisplay = document.getElementById("cardDisplay");
          const feedbackMsg = document.getElementById("feedbackMessage");

          if (isCorrect) {
            cardDisplay.classList.add("correct");
            feedbackMsg.textContent = "âœ… ç­”å°äº†ï¼";
            feedbackMsg.className = "show correct";
          } else {
            cardDisplay.classList.add("incorrect");
            feedbackMsg.textContent = "âŒ ç­”éŒ¯äº†ï¼";
            feedbackMsg.className = "show incorrect";
          }

          setTimeout(() => {
            feedbackMsg.classList.remove("show");
            cardDisplay.classList.remove("correct", "incorrect");
          }, 500);
        },

        finishPhase() {
          console.log(`ğŸ éšæ®µ${this.currentPhase}å®Œæˆ`);
          if (this.currentPhase === 1) {
            this.showScreen("phase2Instruction");
          } else if (this.currentPhase === 2) {
            this.showScreen("phase3Instruction");
          } else {
            this.showResults();
          }
        },

        showResults() {
          console.log("ğŸ‰ æ‰€æœ‰éšæ®µå®Œæˆï¼");
          const stats = this.calculateStatistics();
          const statsContainer = document.getElementById("statsContainer");
          statsContainer.innerHTML = `
                    <div class="stats-row">
                        <span class="stats-label">ç¸½é¡Œæ•¸ï¼š</span>
                        <span class="stats-value">${stats.totalTrials} é¡Œ</span>
                    </div>
                    <div class="stats-row">
                        <span class="stats-label">ç­”å°ï¼š</span>
                        <span class="stats-value">${stats.correctCount} é¡Œ</span>
                    </div>
                    <div class="stats-row">
                        <span class="stats-label">æ­£ç¢ºç‡ï¼š</span>
                        <span class="stats-value">${stats.accuracy.toFixed(1)}%</span>
                    </div>
                    <div class="stats-row">
                        <span class="stats-label">å¹³å‡åæ‡‰æ™‚é–“ï¼š</span>
                        <span class="stats-value">${stats.avgReactionTime.toFixed(0)} ms</span>
                    </div>
                `;
          this.showScreen("resultsScreen");
        },

        calculateStatistics() {
          const totalTrials = this.results.length;
          const correctCount = this.results.filter((r) => r.isCorrect).length;
          const accuracy = (correctCount / totalTrials) * 100;
          const totalReactionTime = this.results.reduce(
            (sum, r) => sum + r.reactionTime,
            0,
          );
          const avgReactionTime = totalReactionTime / totalTrials;
          return { totalTrials, correctCount, accuracy, avgReactionTime };
        },

        exportData() {
          console.log("ğŸ’¾ é–‹å§‹åŒ¯å‡ºè³‡æ–™...");
          const headers = [
            "participant_id",
            "phase",
            "trial",
            "rule",
            "card_background",
            "card_foreground",
            "key_pressed",
            "correct_key",
            "is_correct",
            "reaction_time_ms",
            "timestamp",
          ];

          let csvContent = headers.join(",") + "\n";
          this.results.forEach((result) => {
            const row = [
              result.participantId,
              result.phase,
              result.trial,
              result.rule,
              result.cardBackground,
              result.cardForeground,
              result.keyPressed,
              result.correctKey,
              result.isCorrect ? "TRUE" : "FALSE",
              result.reactionTime,
              result.timestamp,
            ];
            csvContent += row.join(",") + "\n";
          });

          const blob = new Blob([csvContent], {
            type: "text/csv;charset=utf-8;",
          });
          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.href = url;
          const timestamp = new Date().toISOString().replace(/[:.]/g, "-");
          link.download = `DCCS_Results_${this.participantId}_${timestamp}.csv`;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          URL.revokeObjectURL(url);
          console.log("âœ… è³‡æ–™åŒ¯å‡ºå®Œæˆ");
          alert("âœ… è³‡æ–™å·²ä¸‹è¼‰ï¼æª”æ¡ˆæ ¼å¼ç‚º CSVï¼Œå¯ç”¨ Excel æˆ–æ–‡å­—ç·¨è¼¯å™¨é–‹å•Ÿã€‚");
        },

        restart() {
          console.log("ğŸ”„ é‡æ–°é–‹å§‹éŠæˆ²");
          this.participantId = "";
          this.currentPhase = 0;
          this.currentTrial = 0;
          this.totalTrials = 0;
          this.currentCard = null;
          this.currentRule = "";
          this.results = [];
          document.getElementById("participantId").value = "";
          this.showScreen("landingScreen");
        },

        showScreen(screenId) {
          const screens = document.querySelectorAll(".screen");
          screens.forEach((screen) => screen.classList.remove("active"));
          document.getElementById(screenId).classList.add("active");
          console.log(`ğŸ“º åˆ‡æ›ç•«é¢: ${screenId}`);
        },
      };

      window.addEventListener("DOMContentLoaded", () => {
        game.init();
      });
    </script>
  </body>
</html>
